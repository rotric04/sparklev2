<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Sparkle 3.0 — Payment</title>
<meta name="color-scheme" content="dark">
<meta name="description" content="Sparkle 3.0 — Freshers' Party payment portal. Secure UPI payments.">

<!--
  Production notes:
  - Put assets in /assets/: theme.jpg, logo.png, qr1.png.
  - In Vercel add vercel.json with CSP (example at bottom of file).
  - For strict CSP move styles/scripts to files and use nonces.
-->

<style>
:root{
  --max:980px;
  --radius:16px;
  --muted: rgba(255,255,255,0.78);
  --panel-bg: rgba(8,6,14,0.62);
  --accentA: #9b6bff;
  --accentB: #6da6ff;
  --accentC: #7ef0f0;
  --glass: rgba(255,255,255,0.03);
  --focus: rgba(155,107,255,0.14);
}

/* Reset / base */
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;color:#fff;background:#06040a;-webkit-font-smoothing:antialiased}
a{color:inherit;text-decoration:none}
button{font:inherit}

/* Full-viewport background theme (parallax-able) */
.theme-bg{
  position:fixed;inset:0;background-image:url('/assets/theme.png');background-size:cover;background-position:center center;z-index:0;transform-origin:center;will-change:transform;transition:transform 300ms linear;
  filter:contrast(.96) saturate(1.05);
}
.bg-overlay{position:fixed;inset:0;background:linear-gradient(180deg, rgba(3,2,8,0.65), rgba(6,4,10,0.78));backdrop-filter: blur(6px);z-index:1;pointer-events:none}

/* Container */
.wrap{position:relative;z-index:2;max-width:var(--max);margin:36px auto;padding:20px}
header{display:flex;flex-direction:column;align-items:center;gap:10px;margin-top:6vh}
.subtitle{color:var(--muted);font-size:clamp(12px,1.6vw,14px);margin-top:-6px}

/* -------- INTRO (CINEMATIC) -------- */
.intro{
  position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;
  background:linear-gradient(180deg, rgba(2,1,10,0.92), rgba(1,1,6,0.96));
  z-index:60;transition:opacity .5s ease,transform .5s ease;
}
.intro.hidden{opacity:0;pointer-events:none;transform:translateY(-6px)}
.intro-stage{width:min(86vw,880px);height:min(44vh,320px);display:grid;place-items:center;position:relative}
.logo-svg{width:100%;height:auto;filter:drop-shadow(0 20px 60px rgba(80,40,160,0.22));transform-origin:center}
.intro-title{
  font-weight:900;
  font-size: clamp(28px, 7.6vw, 48px);
  letter-spacing: 2px;
  line-height:1;
  color:transparent;
  -webkit-text-fill-color: transparent;
  background:linear-gradient(90deg,var(--accentA),var(--accentB),var(--accentC));
  -webkit-background-clip: text;
  background-clip:text;
  text-align:center;
  filter:drop-shadow(0 6px 18px rgba(80,60,150,0.18));
  transform-origin:center;
}

/* tagline */
.intro-tag{
  font-weight:600;
  font-size:clamp(12px,3vw,16px);
  color:var(--muted);
  opacity:0.95;
  transform:translateY(8px);
}

/* particle canvas */
#introParticles{position:absolute;inset:0;z-index:1;pointer-events:none}

/* sweep effect (inlined SVG rect animation via JS) */

/* -------- MAIN UI -------- */
.logo-small{width:92px;height:92px;border-radius:14px;overflow:hidden;border:2px solid rgba(255,255,255,0.06);background:linear-gradient(90deg,var(--accentA),var(--accentB));display:block;box-shadow:0 12px 40px rgba(0,0,0,0.6)}
.panel{
  margin:28px auto;background:var(--panel-bg);border-radius:var(--radius);padding:20px;border:1px solid rgba(255,255,255,0.03);
  box-shadow:0 30px 80px rgba(0,0,0,0.6);backdrop-filter: blur(6px);
  transform-origin:center;transition:opacity .6s ease, transform .6s ease;
}
.panel.hidden{opacity:0;transform:translateY(12px) scale(.995)}
.panel.enter{opacity:1;transform:translateY(0) scale(1)}

/* phases */
.phase-row{display:flex;gap:10px;justify-content:center;margin-bottom:8px;flex-wrap:wrap}
.phase{padding:10px 14px;border-radius:12px;background:transparent;color:#fff;border:1px solid rgba(255,255,255,0.04);font-weight:700;cursor:pointer;transition:transform .12s,box-shadow .12s}
.phase.active{background:linear-gradient(90deg,var(--accentA),var(--accentB));color:#07101a;box-shadow:0 14px 40px rgba(80,60,180,0.08);transform:translateY(-6px)}
.selected{margin-top:6px;text-align:center;color:var(--muted);font-size:14px}

/* QR area */
.qr-area{display:flex;flex-direction:column;align-items:center;gap:12px;margin-top:16px}
.qr-wrap{background:#fff;padding:18px;border-radius:14px;box-shadow:0 12px 36px rgba(2,6,23,0.48)}
.qr-img{width:320px;height:320px;max-width:92%;object-fit:contain;image-rendering:pixelated;border-radius:12px;display:block}
.qr-meta{font-size:14px;color:var(--muted)}

/* actions */
.actions{display:flex;gap:12px;margin-top:8px;flex-wrap:wrap;justify-content:center}
.btn{padding:12px 16px;border-radius:12px;border:none;cursor:pointer;font-weight:800;transition:transform .12s cubic-bezier(.2,.9,.2,1), box-shadow .12s}
.btn:active{transform:translateY(1px)}
.btn.pay{background:linear-gradient(90deg,var(--accentB),var(--accentA));color:#07101a;box-shadow:0 14px 36px rgba(80,100,220,0.09)}
.btn.copy{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}

/* about & contact */
.split{display:grid;grid-template-columns:1fr 320px;gap:18px;margin-top:18px}
.about{padding:14px;border-radius:12px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.02)}
.org-card{padding:14px;border-radius:12px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.02)}
.socials{display:flex;flex-direction:column;gap:8px;margin-top:8px}
.socials a{color:var(--muted)}

/* micro interactions */
.phase:hover,.btn:hover{box-shadow:0 18px 46px rgba(40,30,100,0.07);transform:translateY(-3px)}

/* responsive */
@media(max-width:920px){.split{grid-template-columns:1fr}.qr-img{width:260px;height:260px}.logo-stage{width:320px;height:200px}}
@media(max-width:480px){.qr-img{width:200px;height:200px}.intro-stage{height:220px}.intro-title{font-size:clamp(22px,8.6vw,36px)}}
.visually-hidden{position:absolute;left:-9999px}
</style>
</head>
<body>

<!-- THEME BG -->
<div id="themeBg" class="theme-bg" aria-hidden="true"></div>
<div class="bg-overlay" aria-hidden="true"></div>

<!-- CINEMATIC INTRO (4s approx) -->
<div id="intro" class="intro" role="dialog" aria-label="Sparkle intro">
  <div class="intro-stage" aria-hidden="true">
    <canvas id="introParticles" width="1000" height="480" aria-hidden="true"></canvas>

    <!-- Inline SVG headline: single-line "Sparkle 3.0" with sweep rect (animated by JS) -->
    <svg id="logoSvg" class="logo-svg" viewBox="0 0 1000 200" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
      <defs>
        <linearGradient id="grad" x1="0" x2="1">
          <stop offset="0%" stop-color="#ffffff"/>
          <stop offset="40%" stop-color="#b084ff"/>
          <stop offset="100%" stop-color="#6da6ff"/>
        </linearGradient>
        <linearGradient id="sweep" x1="0" x2="1">
          <stop offset="0%" stop-color="#fff" stop-opacity="0"/>
          <stop offset="40%" stop-color="#fff" stop-opacity="0.24"/>
          <stop offset="70%" stop-color="#fff" stop-opacity="0.06"/>
          <stop offset="100%" stop-color="#fff" stop-opacity="0"/>
        </linearGradient>
      </defs>

      <text id="headline" x="50%" y="58%" text-anchor="middle" font-family="Impact, Arial Black, sans-serif" font-size="86" fill="url(#grad)" font-weight="900" style="letter-spacing:6px">
        SPARKLE 3.0
      </text>

      <rect id="sweepRect" x="-420" y="-80" width="420" height="280" fill="url(#sweep)" style="mix-blend-mode:screen;opacity:0.98"></rect>
    </svg>
  </div>

  <div id="introTag" class="intro-tag">Welcoming New Beginnings, Celebrating Golden Endings</div>
</div>

<!-- APP (hidden until intro ends) -->
<div class="wrap" id="app" aria-hidden="true" style="opacity:0;transform:translateY(12px)">

  <header>
    <img id="logoMain" class="logo-small" src="/assets/logo.png" alt="Sparkle 3.0" loading="eager" onerror="this.style.display='none'">
    <h1 style="margin:6px 0 0 0;font-size:22px">Freshers' Party — Payment</h1>
    <div class="subtitle">Secure • Minimal • Fast</div>
  </header>

  <section id="mainPanel" class="panel hidden" role="main" aria-labelledby="payHead">
    <h2 id="payHead" class="visually-hidden">Payment</h2>

    <div class="phase-row" id="phases" role="tablist" aria-label="Phases"></div>
    <div class="selected" id="selectedInfo">Selected: —</div>

    <div class="qr-area" id="qrArea">
      <div class="qr-wrap">
        <img id="qrImg" class="qr-img" src="/assets/qr1.png" alt="Payment QR" loading="lazy">
      </div>
      <div class="qr-meta">UPI ID — <strong id="upiId">—</strong></div>

      <div class="actions">
        <button id="payBtn" class="btn pay" type="button">Pay via UPI App</button>
        <button id="copyBtn" class="btn copy" type="button">Copy UPI Link</button>
        <button id="paidBtn" class="btn copy" type="button">Fill Google Form</button>
      </div>

      <div class="guidelines">
        <strong>Guidelines</strong>
        <ul style="margin:8px 0 0 18px;padding:0;color:var(--muted)">
          <li>Phase 1 is open for payment. Phase 2 and 3 will be open soon.</li>
          <li>Verify the amount before paying and keep the transaction screenshot.</li>
          <li>Submit screenshot & UPI transaction ID via Google Form(Mandatory).</li>
          <li>Note: No refunds will be given after the payment is made.</li>
          <li>If you have any questions, please contact us at the contact details below.</li>
          <li>Thank you for your support and follow us on Instagram for updates.</li>
        </ul>
      </div>
    </div>

    <div class="split">
      <div class="about">
        <h3 style="margin:0 0 10px 0">About Sparkle 3.0</h3>
        <p style="margin:0;color:var(--muted);line-height:1.5">
          Sparkle 3.0 is a fully student-driven celebration created to warmly welcome our newly admitted batch while also offering a heartfelt and graceful farewell to our beloved seniors. Embracing the motto “Welcoming New Beginnings, Celebrating Golden Endings,” the event brings together music, performances, joy and togetherness, making it a special night where new journeys begin and cherished chapters are honored with pride.
        </p>
      </div>

      <aside class="org-card" aria-labelledby="orgHead">
        <h3 id="orgHead" style="margin:0 0 8px 0">Organiser & Contact</h3>
        <div style="color:var(--muted);line-height:1.6">
          <div><strong>Organiser:</strong> Sparkle 3.0 Committee</div>
          <div><strong>Phone:</strong> <a href="tel:+911234567890">+91 8980667112</a></div>
          <div><strong>Email:</strong> <a href="mailto:contact@sparkle.example">sparkle.uvpce@gmail.com</a></div>

          <div style="margin-top:8px"><strong>Follow us:</strong></div>
          <div class="socials">
            <a href="https://www.instagram.com/sparkle.uvpce?igsh=aWx3YWQ5MW1yeW9l" target="_blank" rel="noopener">Instagram • @sparkle3.0</a>
            <a href="https://maps.app.goo.gl/K7aEVPNHssWAoT9R8" target="_blank" rel="noopener">Venue • Map</a>
          </div>
        </div>
      </aside>
    </div>

  </section>

  <footer style="margin-top:18px;text-align:center;color:var(--muted)">© Sparkle 3.0 2026</footer>
</div>

<script>
/* ================= CONFIG (edit only) ================= */
const CONFIG = {
  phases: [
    { key:'phase1', label:'Phase 1', amount:200, capacity:600 },
    { key:'phase2', label:'Phase 2', amount:250, capacity:400 },
    { key:'phase3', label:'Phase 3', amount:300, capacity:-1 }
  ],
  activePhaseIndex: 0,
  qr: { upi: 'gunjansharma1982005@okhdfcbank', img: 'assets/qr1.png', img2x: null },
  payeeName: 'Sparkle 3.0',
  transactionNote: 'Sparkle3.0_Freshers',
  googleFormLink: 'https://forms.gle/5V24tUPaWvEZwHcG9'
};
/* ================================================ */

/* DOM refs */
const intro = document.getElementById('intro');
const appWrap = document.getElementById('app');
const panel = document.getElementById('mainPanel');
const sweepRect = document.getElementById('sweepRect');
const phasesEl = document.getElementById('phases');
const selectedInfo = document.getElementById('selectedInfo');
const qrImg = document.getElementById('qrImg');
const upiIdEl = document.getElementById('upiId');
const payBtn = document.getElementById('payBtn');
const copyBtn = document.getElementById('copyBtn');
const paidBtn = document.getElementById('paidBtn');
const themeBg = document.getElementById('themeBg');

/* --------- Render phases --------- */
function renderPhases(){
  phasesEl.innerHTML = '';
  CONFIG.phases.forEach((p,i)=>{
    const btn = document.createElement('button');
    btn.className = 'phase';
    btn.type = 'button';
    btn.innerHTML = `${p.label}<div style="font-size:12px;color:var(--muted)">₹${p.amount}</div>`;
    if (i === CONFIG.activePhaseIndex) btn.classList.add('active');
    btn.disabled = !(i === CONFIG.activePhaseIndex && p.capacity !== 0);
    btn.addEventListener('click', ()=> selectPhase(i));
    phasesEl.appendChild(btn);
  });
  selectPhase(CONFIG.activePhaseIndex);
}
function selectPhase(idx){
  const p = CONFIG.phases[idx];
  selectedInfo.textContent = `Selected: ${p.label} — ₹${p.amount} — ${p.capacity===-1?'Remaining seats':(p.capacity===0?'Full':p.capacity+' seats')}`;
}

/* --------- Render QR --------- */
function renderQr(){
  if (CONFIG.qr.img2x) qrImg.srcset = `${CONFIG.qr.img} 1x, ${CONFIG.qr.img2x} 2x`;
  qrImg.src = CONFIG.qr.img;
  upiIdEl.textContent = CONFIG.qr.upi;
}

/* --------- UPI helpers --------- */
function buildUpiUri(upiId, amount){
  const am = Number(amount).toFixed(2);
  const pa = encodeURIComponent(upiId);
  const pn = encodeURIComponent(CONFIG.payeeName || '');
  const tn = encodeURIComponent(CONFIG.transactionNote || '');
  return `upi://pay?pa=gunjansharma1982005@okhdfcbank&pn=Gunjan%20Sharma&am=200.00&cu=INR&aid=uGICAgMDy6MW8Qw`;
}
function openUpiUri(uri){ window.location.href = uri; }
function copyToClipboard(text){
  if (!text) { alert('Nothing to copy'); return; }
  if (navigator.clipboard && navigator.clipboard.writeText) {
    navigator.clipboard.writeText(text).then(()=> alert('Copied UPI link'), ()=> prompt('Copy this link:', text));
  } else {
    const ta = document.createElement('textarea'); ta.value = text; document.body.appendChild(ta); ta.select();
    try{ document.execCommand('copy'); alert('Copied UPI link'); }catch(e){ prompt('Copy this link:', text); }
    ta.remove();
  }
}

/* --------- Event handlers --------- */
payBtn.addEventListener('click', ()=>{
  const amount = CONFIG.phases[CONFIG.activePhaseIndex].amount;
  openUpiUri(buildUpiUri(CONFIG.qr.upi, amount));
});
copyBtn.addEventListener('click', ()=> copyToClipboard(buildUpiUri(CONFIG.qr.upi, CONFIG.phases[CONFIG.activePhaseIndex].amount)));
paidBtn.addEventListener('click', ()=> {
  if (!CONFIG.googleFormLink) return alert('Google Form link not configured');
  window.open(CONFIG.googleFormLink,'_blank','noopener');
});

/* --------- Intro animation (sweep + particles + 4s flow) --------- */
function animateIntro(){
  // sweep rect animation: ~3.2s sweep
  const duration = 3200;
  const start = performance.now();
  const startX = -520, endX = 1320;
  function frame(now){
    const t = Math.min(1, (now - start)/duration);
    const eased = 1 - Math.pow(1 - t, 3);
    const x = startX + (endX - startX) * eased;
    if (sweepRect) sweepRect.setAttribute('x', x);
    if (t < 1) requestAnimationFrame(frame);
  }
  requestAnimationFrame(frame);

  startIntroParticles(); // run particles

  // ensure minimum intro visible ~4s (duration + buffer)
  const total = duration + 650;
  setTimeout(()=> {
    intro.classList.add('hidden');
    setTimeout(()=> {
      intro.style.display='none';
      revealMain();
    }, 480);
  }, total);
}

/* --------- minimal but optimized particle system (canvas) --------- */
function startIntroParticles(){
  const canvas = document.getElementById('introParticles');
  if (!canvas || !canvas.getContext) return;
  const ctx = canvas.getContext('2d');
  const DPR = window.devicePixelRatio || 1;
  function resize(){ canvas.width = canvas.clientWidth * DPR; canvas.height = canvas.clientHeight * DPR; }
  resize(); window.addEventListener('resize', resize);

  const particles = [];
  const N = Math.max(14, Math.floor(canvas.width/60));
  for(let i=0;i<N;i++){
    particles.push({
      x: Math.random()*canvas.width,
      y: canvas.height + Math.random()*180,
      vx: (Math.random()-0.5)*0.6,
      vy: - (0.8 + Math.random()*1.6),
      r: 1 + Math.random()*6,
      life: 120 + Math.random()*200,
      hue: 240 + Math.random()*90
    });
  }

  let last = performance.now();
  function loop(now){
    const dt = Math.min(40, now - last); last = now;
    ctx.clearRect(0,0,canvas.width,canvas.height);
    particles.forEach(p=>{
      p.x += p.vx * dt;
      p.y += p.vy * dt;
      p.life -= dt*0.12;
      if (p.life <= 0 || p.y < -80){
        p.x = Math.random()*canvas.width;
        p.y = canvas.height + 10 + Math.random()*120;
        p.vx = (Math.random()-0.5)*0.6;
        p.vy = - (0.8 + Math.random()*1.6);
        p.r = 1 + Math.random()*6;
        p.life = 120 + Math.random()*200;
      }
      const g = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, p.r*12);
      g.addColorStop(0, `hsla(${p.hue},95%,70%,0.95)`);
      g.addColorStop(0.25, `hsla(${p.hue},95%,70%,0.36)`);
      g.addColorStop(1, `hsla(${p.hue},95%,70%,0)`);
      ctx.fillStyle = g;
      ctx.fillRect(p.x - p.r*6, p.y - p.r*6, p.r*12, p.r*12);
    });
    if (intro && !intro.classList.contains('hidden')) requestAnimationFrame(loop);
  }
  requestAnimationFrame(loop);
}

/* --------- reveal main UI (fade+scale pop) --------- */
function revealMain(){
  appWrap.setAttribute('aria-hidden','false');
  appWrap.style.opacity = '1';
  appWrap.style.transform = 'translateY(0)';
  panel.classList.remove('hidden');
  panel.classList.add('enter');
  // small staggered fade for panel children
  const children = panel.querySelectorAll('.fade-el, .about, .org-card');
  children.forEach((el, i)=> setTimeout(()=> { el.style.opacity=1; el.style.transform='translateY(0)'; }, 200 + i*90));
}

/* --------- subtle parallax background (desktop) --------- */
(function backgroundParallax(){
  const bg = document.getElementById('themeBg');
  if (!bg) return;
  let lastX=0, lastY=0;
  function onMove(e){
    const w = window.innerWidth, h = window.innerHeight;
    const x = (e.clientX / w - 0.5) * 22;
    const y = (e.clientY / h - 0.5) * 12;
    lastX += (x - lastX) * 0.06;
    lastY += (y - lastY) * 0.06;
    bg.style.transform = `translate3d(${lastX}px, ${lastY}px, 0) scale(1.02)`;
  }
  window.addEventListener('mousemove', onMove, {passive:true});
})();

/* --------- init --------- */
renderPhases();
renderQr();
animateIntro();

/* accessibility live region */
const live = document.createElement('div'); live.style.position='absolute'; live.style.left='-9999px'; live.setAttribute('aria-live','polite'); live.textContent = `Open phase: ${CONFIG.phases[CONFIG.activePhaseIndex].label}`; document.body.appendChild(live);
</script>

<!--
Recommended vercel.json for security headers (place in project root when deploying):

{
  "headers": [
    {
      "source": "/(.*)",
      "headers": [
        { "key": "Content-Security-Policy", "value": "default-src 'self'; img-src 'self' data:; style-src 'self' 'unsafe-inline'; script-src 'self';" },
        { "key": "Referrer-Policy", "value": "no-referrer" },
        { "key": "X-Frame-Options", "value": "DENY" },
        { "key": "X-Content-Type-Options", "value": "nosniff" }
      ]
    }
  ]
}

Security tips:
- For stricter CSP remove 'unsafe-inline' by moving styles/scripts to external files and using nonces.
- Serve via HTTPS (Vercel does this automatically).
- Keep assets in the repo (no external hosted assets) to prevent tampering.
- Test UPI deep links on Android Chrome (most reliable). iOS behaviour may vary by browser.
-->

</body>
</html>

